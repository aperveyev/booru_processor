## ImageMagick - пакетная обработка изображений (Windows ВАТ-файлы)

### Что в папке:
- **Генерация изображений "иконок" и расчет мета-данных** основной 0000.bat, выполняемый в цикле 0000_loop.bat (названия поменяю)
  Часть показателей рассчитывается по оригиналу, часть по "иконке" или даже производным от нее (после преобразований).

### Смысл статистических характеристик изображения, рассчитываемых Imagick и их получение

Способ получения **magick identify -format "форматная_маска" входной_файл >> выходной_файл** или
**magick convert входной_файл ВСЯКИЕ_ПРЕОБРАЗОВАНИЯ -format "форматная_маска" info: >> выходной_файл**

В BAT-файлах символ "процент" должен быть удвоен.

**Основные характеристики (по заголовку файла, не ресурсоемкие):**
- %f - имя файла
- %d - путь к файлу
- %B - размер в байтах (ключи чувствительны к регистру !)
- %[width] - ширина в точках (квадратные скобки !)
- %[height] - высота в точках 
- %[bit-depth] - глубина цвета
- %x - разрешение по Х
- %y - разрешение по Y
- %U - единица измерения разрешения
- %m - формат файла (можен не соппадать с формальным расширением файла !)
- %Q - качество компрессии
- %C - тип компрессии
- %r - цветовое пространство
- %# - инфо-хеш изображения, потенциальный уникальный ключ, для поиска подобий непригоден

**Расчетные характеристики (ресурсоемкие для крупных изображений):**
- %@ - bound_box в формате WIDTHxHEIGHT+X+Y для "чистого" (без блюра) trim
- %k - количество цветов
- %[entropy] - энтропия, показатель доли однородного фона
- %[skewness] - показатель "темноты" изображения
- %[fx:mean] - среднее по гистограмме цветов "в целом" или по цветовому каналу
- %[fx:standard_deviation] - стандартное отклонение по гистограмме цветов "в целом" или по цветовому каналу
- %[fx:maxima] - максимум по гистограмме цветов "в целом" или по цветовому каналу

### Типичные преобразования с помощью magick convert (+ цепочки операций !)
- magick convert входной_файл **-colorspace HCL** - преобразование цветового пространства
- magick convert входной_файл **-channel red** - выделение канала
- magick convert входной_файл **-edge ЧИСЛО** - детектирование границ (число - толщина)
- magick convert входной_файл **-fuzz ЧИСЛО%** - размытие (число с процентом в конце - "степень размытия")
- **-trim +repage** - обрезка и приведение канваса к новому размеру
